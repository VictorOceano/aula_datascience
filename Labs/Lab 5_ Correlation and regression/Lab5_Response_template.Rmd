---
title: 'Lab 5: Your responses'
output:
  html_document: default
  github_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Your name: {Name here}

In the spaces below, insert your code and/or explanation as notes. Look for the angle brackets-{like these}-for where a response is needed.

When you are done, click on the arrow next to "knit" and choose "Knit as PDF" to save. 

Load the data and the tidyverse package in the code chunk below

```{r message=FALSE}
#devtools::install_github("tidyverse/ggplot2") #Allows mapping of sf objects. Uncomment if you haven't already installed. 
library(sf)
library(tidyverse)
census_data<-read_csv("https://github.com/jshannon75/geog4300/raw/master/Labs/Lab%205_%20Correlation%20and%20regression/nhgis0052_ds215_20155_2015_cd113th-114th.csv")
census_shape<-st_read("https://github.com/jshannon75/geog4300/raw/master/Labs/Lab%205_%20Correlation%20and%20regression/districts_2012.geojson")
```

###Part 1

**Question 1 (2 points)** _List the code you used to create your new variables and call the resulting table._

```{r question_1}
#Code goes here
```

**Question 2 (4 points)** _Use left_join to connect your district table from question 1 with the geographic boundaries you imported in question 1. Use select to choose the four census rate variables and the polsby variable. Scale the census variables to create z scores. Then use gather to transform the four scaled census variables to long format so you can plot them. Call the table when done._

```{r question_2}
#Code goes here
```

**Question 3 (2 points)** _Using facet_wrap with ggplot, plot the distribution of each of the four scaled census variables on a single small multiples map using the Albers conic projection._

```{r question_3}
#Code goes here
```

**Question 4 (3 points)** _Based on the map from question 3, summarise two main patterns you see in the spatial distribution of these data. Be sure to make specific references to your data to illustrate your points._

{Type your response here.}

###Part 2

**Question 5 (3 points):** _Using just the raw rates (not z scores), test your five variables of interest for normality, using qq plots and the shapiro-wilcox test on each one. Explain how your results suggest the use of parametric or non-parametric staistical tests._ 

```{r question_5}
#Code goes here
```

{Type your response here}

**Question 6 (4 points)** _Create a data frame with just your five variables of interest (raw census rates plus polsby). Then use rcorr to create a correlation matrix with the appropriate measure based on your findings in question 5 (Pearson or Spearman). Interpret the results these matrices show, focusing on both the magnitude and direction of the correlation._

```{r question_6}
#Code goes here
```

{Type your response here}

###Part 3

**Question 7 (3 points)** _Create a data frame that has the five variables of interest and the geometry column. Create an OLS regression model from this data frame that has the compactness score as the dependent variable and the others as dependent variables. Call the model so your results appear in the response document._

```{r question_7}
#Code goes here
```

**Question 8 (3 points)** _Interpret your regression model, focusing on the magnitude, direction, and significance of model coefficients and the overall power of the model._

{Type your response here}

**Question 9 (3 points)** _Check your for the normality of residuals and heterosketasticity using the tests described in class. Add the residuals as a new variable in your model data and plot their spatial distribution using ggplot._

```{r question_9}
#Code goes here
```

**Question 10 (3 points)** _Based on your results, assess how either the spatial/statistical distribution of residuals or heterosketasticity may show a problem with this model._ 

{Type your response here}